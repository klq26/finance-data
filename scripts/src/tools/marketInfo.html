<html style="background: #000;">

<head>
    <meta http-equiv="Content-Language" content="zh-cn">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style>

        .moneyValueBox {
            display: inline-block;
            max-width: 624;
        }
        .moneyValue {
            color: #FFFFFF;
            display: inline-block;
            text-align: center;
            background-color: gray;
            width: 200px;
            font-size: 36;
            margin: 4px;
        }
        /* 基金标题 */
        .fundTitle {
            color: #FF9900;
            display: inline-block;
            text-align: center;
            background-color: gray;
            width: 240px;
            font-size: 36;
            margin: 4px;
        }

        /* 指数 */
        .index {
            color: #FFFFFF;
            font-size: 36px;
            margin: 4px;
        }

        .indexTitle {
            color: #FFFFFF;
            display: inline-block;
            text-align: center;
            background-color: gray;
            width: 240px;
            font-size: 36;
            margin: 4px;
        }

        .indexValue {
            color: #FFFFFF;
            display: inline-block;
            text-align: right;
            background-color: gray;
            padding-right: 4px;
            width: 200px;
            font-size: 36;
            margin: 4px;
        }

        .indexUpDown {
            color: #FFFFFF;
            display: inline-block;
            text-align: center;
            background-color: #333333;
            width: 200px;
            font-size: 36;
            margin: 4px;
        }

        /* 时间戳 */
        #timestamp {
            color: #FFFFFF;
            font-size: 36px;
            margin: 4px;
        }

        /* 涨跌平区 */
        .zdpBarArea {
            color: #FFFFFF;
            font-size: 36px;
            margin-top: 4px;
            margin-left: 4px;
        }

        /* 涨跌平条 */
        .zdpBar {
            display: inline-block;
            margin-left: -8px;
        }

        /* 涨跌平条 - 涨 */
        .barUp {
            display: inline-block;
            background-color: #DD2200;
            text-align: center;
        }

        /* 涨跌平条 - 平 */
        .barEqual {
            display: inline-block;
            background-color: gray;
            text-align: center;
            margin-left: 25px;
        }

        /* 涨跌平条 - 跌 */
        .barDown {
            display: inline-block;
            background-color: #009933;
            text-align: center;
            margin-left: 25px;
        }
    </style>
    <!-- 百度压缩版 jQuery -->
    <script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
    <!-- 自定义脚本 -->
    <script type="text/javascript">

        // 全局变量：中国股市是否开盘（注释：第一次给 true 是为了能拿到昨天最后收盘的数据，如果现在休市，showTime 函数会关闭这个变量）
        var isChinaMarketChanging = true;
        var isMoneyFlowChanging = true;
        var isWeekend = false;
        // 涨跌平柱状条宽度
        var zdpBarWidth = 606-50;

        // 请求中国开盘数据（含香港）
        function requestChinaData() {
            // 收盘和午间休息时间不做处理
            if (isWeekend || !isChinaMarketChanging) {
                return;
            }
            $.ajax({
                url: "http://10.push2.eastmoney.com/api/qt/clist/get?cb=updateIndexInfos&pn=1&pz=30&fs=i:1.000012,i:1.000013,i:1.000832,i:1.000001,i:0.399001,i:0.399006,i:1.000015,i:1.000922,i:1.000016,i:1.000300,i:0.399905,i:1.000852,i:0.399005,i:1.000991,i:1.000992,i:0.399975,i:0.399986,i:0.399812,i:0.399971,i:1.000827,i:100.HSI,i:100.HSCEI,i:124.HSCCI&fields=f14,f12,f2,f4,f3,f18,f6",
                type: "GET",
                contentType: "application/x-javascript",
                dataType: "script",
                async: true
            });
            // 取基金
            $.ajax({
                url: "http://push2.eastmoney.com/api/qt/stock/details/get?secid=0.162411&fields1=f1,f2,f3,f4&fields2=f51,f52,f53,f54,f55&pos=-11&cb=updateInnerMarketFunds",
                type: "GET",
                contentType: "application/x-javascript",
                dataType: "script",
                async: true
            });
        }

        // 请求指数的涨跌平盘分布情况
        function requestZDPData() {
            // 收盘和午间休息时间不做处理
            if (isWeekend || !isChinaMarketChanging) {
                return;
            }
            var timestamp = new Date().getTime();
            $.ajax({
                url: "https://hq.sinajs.cn/?_=" + timestamp + "&list=sh000002_zdp,sz399107_zdp,sh000003_zdp,sz399108_zdp,sz399102_zdp,sh000016_zdp,sh000300_zdp,sz399905_zdp,sh000852_zdp",
                type: "GET",
                contentType: "application/javascript",
                dataType: "script",
                async: false,
                success: function (data) {
                    // e.g.
                    // var hq_str_sh000002_zdp="865,535,97";    沪A
                    // var hq_str_sz399107_zdp="1396,702,95";   深A
                    // var hq_str_sh000003_zdp="26,14,9";       沪B
                    // var hq_str_sz399108_zdp="13,26,7";       深B
                    // var hq_str_sz399102_zdp="559,217,15";    创业
                    // var hq_str_sz399905_zdp="309,162,29";    中证 500
                    shanghaiA = hq_str_sh000002_zdp.split(',');
                    shanghaiB = hq_str_sh000003_zdp.split(',');
                    shenzhenA = hq_str_sz399107_zdp.split(',');
                    shenzhenB = hq_str_sz399108_zdp.split(',');
                    // 创业板综
                    chuangyeban = hq_str_sz399102_zdp.split(',');
                    // 上证50
                    sz50 = hq_str_sh000016_zdp.split(',');
                    // 沪深300
                    hs300 = hq_str_sh000300_zdp.split(',');
                    // 中证500
                    zz500 = hq_str_sz399905_zdp.split(',');
                    // 中证1000
                    zz1000 = hq_str_sh000852_zdp.split(',');
                    // 统计
                    allUp = parseInt(shanghaiA[0]) + parseInt(shanghaiB[0]) + parseInt(shenzhenA[0]) + parseInt(shenzhenB[0]);
                    allEqual = parseInt(shanghaiA[2]) + parseInt(shanghaiB[2]) + parseInt(shenzhenA[2]) + parseInt(shenzhenB[2]);
                    allDown = parseInt(shanghaiA[1]) + parseInt(shanghaiB[1]) + parseInt(shenzhenA[1]) + parseInt(shenzhenB[1]);
                    // 全市场
                    updateZDPBar("allStockBar", allUp, allEqual, allDown);
                    // 创业板综
                    updateZDPBar("ccyBar", parseInt(chuangyeban[0]), parseInt(chuangyeban[2]), parseInt(chuangyeban[1]));
                    // 上证50
                    updateZDPBar("sz50Bar", parseInt(sz50[0]), parseInt(sz50[2]), parseInt(sz50[1]));
                    // 沪深300
                    updateZDPBar("hs300Bar", parseInt(hs300[0]), parseInt(hs300[2]), parseInt(hs300[1]));
                    // 中证500
                    updateZDPBar("zz500Bar", parseInt(zz500[0]), parseInt(zz500[2]), parseInt(zz500[1]));
                    // 中证1000
                    updateZDPBar("zz1000Bar", parseInt(zz1000[0]), parseInt(zz1000[2]), parseInt(zz1000[1]));
                }
            });
        }

        // 请求资金流向数据
        function requestMoneyFlow() {
            if (isWeekend || !isMoneyFlowChanging) {
                return;
            }
            // 沪深两市资金情况. http://data.eastmoney.com/zjlx/
            $.ajax({
                url: "http://push2.eastmoney.com/api/qt/stock/fflow/kline/get?lmt=0&klt=1&secid=1.000001&secid2=0.399001&fields1=f1,f2,f3,f7&fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61,f62,f63&cb=updateMoneyFlow",
                type: "GET",
                contentType: "application/javascript",
                dataType: "script",
                async: false
            });

            // 沪港通，深港通南北向资金情况 http://data.eastmoney.com/hsgt/index.html
            $.ajax({
                url: "http://push2.eastmoney.com/api/qt/kamt.rtmin/get?fields1=f1,f2,f3,f4&fields2=f51,f52,f53,f54,f55,f56&cb=updateHKMoneyFlow",
                type: "GET",
                contentType: "application/javascript",
                dataType: "script",
                async: false
            });
        }

        // 请求中国沪深两市日成交额
        function requestChinaDealMoney() {
            if (isWeekend || !isMoneyFlowChanging) {
                return;
            }
            var timestamp = new Date().getTime();
            $.ajax({
                url: "https://hq.sinajs.cn/?_=" + timestamp + "&list=sh000002,sz399107",
                type: "GET",
                contentType: "application/javascript",
                dataType: "script",
                async: false,
                success: function (data) {
                    // e.g.
                    // var hq_str_sh000002="Ａ股指数,3167.0565,3175.3586,3185.3286,3205.4942,3164.8660,0,0,364236640,444905796225,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2020-02-21,15:01:59,00,";
                    // var hq_str_sz399107="深证Ａ指,1971.898,1973.376,1995.617,2009.953,1969.840,0.000,0.000,60000890970,725835755525.050,0,0.000,0,0.000,0,0.000,0,0.000,0,0.000,0,0.000,0,0.000,0,0.000,0,0.000,0,0.000,2020-02-21,15:00:03,00";
                    shanghaiA = hq_str_sh000002.split(',');
                    shenzhenA = hq_str_sz399107.split(',');
                    shanghaiDealMoney = shanghaiA[9] / 100000000;
                    shenzhenDealMoney = shenzhenA[9] / 100000000;
                    totalDealMoney = shanghaiDealMoney + shenzhenDealMoney;
                    // 更新
                    var moneyFlow = document.getElementById("inlandDealMoney");
                    moneyFlow.innerHTML = "";
                    // 标题
                    var title = document.createElement('div');
                    title.className = "indexTitle";
                    title.innerText = "沪深两市成交额（亿）";
                    moneyFlow.appendChild(title);
                    // 沪
                    var shMoney = document.createElement('div');
                    shMoney.className = "moneyValue";
                    shMoney.innerText = '沪 ' + shanghaiDealMoney.toFixed(1);
                    moneyFlow.appendChild(shMoney);
                    // 深
                    var szMoney = document.createElement('div');
                    szMoney.className = "moneyValue";
                    szMoney.innerText = '深 ' + shenzhenDealMoney.toFixed(1);
                    moneyFlow.appendChild(szMoney);
                    // 总
                    var totalMoney = document.createElement('div');
                    totalMoney.className = "moneyValue";
                    totalMoney.innerText = '总 ' + totalDealMoney.toFixed(1);
                    moneyFlow.appendChild(totalMoney);
                }
            });
        }

        // 请求外国开盘数据（中国收盘了之后再开始运行）
        function requestForeignData() {
            if (isWeekend || isChinaMarketChanging) {
                return;
            }
            $.ajax({ 
                url: "http://87.push2.eastmoney.com/api/qt/ulist.np/get?cb=updateIndexInfos&np=1&pi=0&pz=40&po=1&secids=100.FTSE%2C100.FCHI%2C100.GDAXI%2C100.TWII%2C100.N225%2C100.KS11%2C100.RTS%2C100.DJIA%2C100.NDX%2C100.SPX&fields=f14,f12,f2,f4,f3,f18,f6", 
                type: "GET", 
                contentType: "application/x-javascript", 
                dataType: "script", 
                async: true });
        }

        // 请求商品，外汇数据（始终请求）
        function requestOtherData() {
            if (isWeekend) {
                return;
            }
            var timestamp = new Date().getTime();
            $.ajax({
                url: "https://hq.sinajs.cn/?_=" + timestamp + "&list=hf_GC,hf_CL,hf_SI,hf_CHA50CFD,USDCNY,GBPCNY,EURCNY,HKDCNY,CNYJPY",
                type: "GET",
                contentType: "application/javascript",
                dataType: "script",
                async: false,
                success: function (data) {
                    //e.g. 直接给回 4 个变量，直接用变量即可
                    // var hq_str_hf_GC="1635.800,,1635.300,1635.400,1639.400,1621.600,16:51:10,1620.500,1623.600,535563.000,19,5,2020-02-21,纽约黄金";
                    // var hq_str_hf_CL="53.295,,53.320,53.330,53.860,53.070,16:51:08,53.880,53.740,416164.000,28,14,2020-02-21,纽约原油";
                    // var hq_str_hf_SI="18.494,,18.485,18.490,18.570,18.335,16:51:08,18.319,18.360,88100.000,25,22,2020-02-21,纽约白银";
                    // var hq_str_USDCNY="16:50:21,7.0376,7.0373,7.0230,147,7.0292,7.0429,7.0282,7.0373,美元人民币,2020-02-21";
                    // var hq_str_GBPCNY="16:49:18,9.0862,9.0882,9.0458,411,9.0472,9.0862,9.0451,9.0862,英镑人民币,2020-02-21";
                    // var hq_str_EURCNY="16:50:49,7.6086,7.6115,7.5720,502,7.5724,7.6120,7.5618,7.6086,欧元人民币,2020-02-21";
                    // var hq_str_HKDCNY="16:49:18,0.9031,0.9039,0.9023,17,0.9022,0.9036,0.9019,0.9031,港元人民币,2020-02-21";
                    // var hq_str_CNYJPY="16:49:18,15.84,15.88,15.94,1200,15.94,15.94,15.82,15.84,人民币日元,2020-02-21";
                    // 富时 A50 期货
                    indexInfos = hq_str_hf_CHA50CFD.split(',');
                    updateOtherInfos("hq_str_hf_CHA50CFD", "富时 A50", parseFloat(indexInfos[0]), parseFloat(indexInfos[7]));
                    // 黄金
                    goldInfos = hq_str_hf_GC.split(',');
                    updateOtherInfos("hq_str_hf_GC", goldInfos[13], parseFloat(goldInfos[0]), parseFloat(goldInfos[7]));
                    // 白银
                    silverInfos = hq_str_hf_SI.split(',');
                    updateOtherInfos("hq_str_hf_SI", silverInfos[13], parseFloat(silverInfos[0]), parseFloat(silverInfos[7]));
                    // 原油
                    oilInfos = hq_str_hf_CL.split(',');
                    updateOtherInfos("hq_str_hf_CL", oilInfos[13], parseFloat(oilInfos[0]), parseFloat(oilInfos[7]));
                    // 外汇
                    moneyInfos = hq_str_USDCNY.split(',');
                    updateOtherInfos("hq_str_USDCNY", moneyInfos[9], parseFloat(moneyInfos[2]), parseFloat(moneyInfos[3]));
                    moneyInfos = hq_str_GBPCNY.split(',');
                    updateOtherInfos("hq_str_GBPCNY", moneyInfos[9], parseFloat(moneyInfos[2]), parseFloat(moneyInfos[3]));
                    moneyInfos = hq_str_EURCNY.split(',');
                    updateOtherInfos("hq_str_EURCNY", moneyInfos[9], parseFloat(moneyInfos[2]), parseFloat(moneyInfos[3]));
                    moneyInfos = hq_str_HKDCNY.split(',');
                    updateOtherInfos("hq_str_HKDCNY", moneyInfos[9], parseFloat(moneyInfos[2]), parseFloat(moneyInfos[3]));
                    moneyInfos = hq_str_CNYJPY.split(',');
                    updateOtherInfos("hq_str_CNYJPY", moneyInfos[9], parseFloat(moneyInfos[2]), parseFloat(moneyInfos[3]));
                },
                error: function () {
                    console.log('error');
                }
            });
        }

        // 更新各国指数数据
        function updateIndexInfos(data) {

            var diff = data['data']['diff'];
            for (var key in diff) {
                // 指数数据
                var item = diff[key];
                // id
                elementId = "#" + item['f12'];
                // 代码
                code = item['f12'];
                // 名称
                name = item['f14'];
                // 当前价
                current = (parseFloat(item['f2']) / 100).toFixed(2);
                // 前收盘
                lastClose = current - parseFloat(item['f4']) / 100;
                // 上次更新的值
                lastValue = $(elementId).val();
                // 如果没有上次值，则说明是第一次进入页面，不计算涨跌
                if (lastValue == 0) {
                    lastValue = current;
                }

                // 和上次查询进行比较（非和昨天收盘价比较，而是和上次日内查询进行比较）
                raisedTag = "-";
                raisedTagColor = "#FFFFFF";
                if (current > lastValue) {
                    raisedTag = "↑";
                    raisedTagColor = "#DD2200";
                } else if (current < lastValue && current != 0) {
                    raisedTag = "↓";
                    raisedTagColor = "#009933";
                } else {
                    raisedTag = "-";
                    raisedTagColor = "#FFFFFF";
                }
                // 日间升降指标（和昨天收盘比较，决定整条数据的整体颜色）
                changedColor = "";
                if (current > lastClose) {
                    // console.log('上涨');
                    changedColor = "#DD2200";
                    
                } else if (current < lastClose) {
                    // console.log('下跌');
                    changedColor = "#009933";
                } else {
                    changedColor = "#FFFFFF";
                }
                // 取出 index 元素
                var indexElement = document.getElementById(item['f12']);
                indexElement.innerHTML = "";
                // 标题
                var title = document.createElement('div');
                title.className = "indexTitle";
                title.innerText = name;
                indexElement.appendChild(title);
                // 点数
                var indexValue = document.createElement('div');
                indexValue.className = "indexValue";
                indexValue.innerText = current;
                indexValue.style.setProperty('background-color',changedColor);
                indexElement.appendChild(indexValue);
                // 点数
                var changeRate = document.createElement('div');
                changeRate.className = "indexValue";
                changeRate.innerText = ((current / lastClose - 1) * 100).toFixed(2) + '%';
                changeRate.style.setProperty('background-color',changedColor);
                indexElement.appendChild(changeRate);
                // 变化方向
                var upDown = document.createElement('div');
                upDown.className = "indexUpDown";
                upDown.innerText = raisedTag;
                upDown.style.setProperty('color',raisedTagColor);
                indexElement.appendChild(upDown);
                // 保存本次数值
                $(elementId).val(current);
                // 更新动画
                $(upDown).fadeOut({duration : 300});
                $(upDown).fadeIn({duration : 300});
                $(upDown).fadeOut({duration : 300});
                $(upDown).fadeIn({duration : 300});
                
            }


        }

        // 更新关心的场内基金
        function updateInnerMarketFunds(data) {
            console.log(data);
            // 取出 index 元素
            var indexElement = document.getElementById(data['data']['code']);
                indexElement.innerHTML = "";
                // 标题
                var title = document.createElement('div');
                title.className = "fundTitle";
                title.innerText = "华宝油气";
                indexElement.appendChild(title);
                // 点数
                
                var details = data['data']['details'];
                current = details[details.length - 1].split(',')[1];
                // 上次更新的值
                lastValue = $(elementId).val();
                // 如果没有上次值，则说明是第一次进入页面，不计算涨跌
                if (lastValue == 0) {
                    lastValue = current;
                }
                changedColor = "";
                if (current > lastClose) {
                    // console.log('上涨');
                    changedColor = "#DD2200";
                    
                } else if (current < lastClose) {
                    // console.log('下跌');
                    changedColor = "#009933";
                } else {
                    changedColor = "#FFFFFF";
                }
                var indexValue = document.createElement('div');
                indexValue.className = "indexValue";
                indexValue.innerText = current;
                indexValue.style.setProperty('background-color',changedColor);
                indexElement.appendChild(indexValue);
                // 点数
                lastClose = data['data']['prePrice'];
                var changeRate = document.createElement('div');
                changeRate.className = "indexValue";
                changeRate.innerText = ((current / lastClose - 1) * 100).toFixed(2) + '%';
                changeRate.style.setProperty('background-color',changedColor);
                indexElement.appendChild(changeRate);
                // 变化方向
                var upDown = document.createElement('div');
                var raisedTag = "-";
                var raisedTagColor = "#FFFFFF";
                if (current > lastValue) {
                    raisedTag = "↑";
                    raisedTagColor = "#DD2200";
                } else if (current < lastValue && current != 0) {
                    raisedTag = "↓";
                    raisedTagColor = "#009933";
                } else {
                    raisedTag = "-";
                    raisedTagColor = "#FFFFFF";
                }
                upDown.className = "indexUpDown";
                upDown.innerText = raisedTag;
                upDown.style.setProperty('color',raisedTagColor);
                indexElement.appendChild(upDown);
                // 保存本次数值
                $(elementId).val(current);
                // 更新动画
                $(upDown).fadeOut({duration : 300});
                $(upDown).fadeIn({duration : 300});
                $(upDown).fadeOut({duration : 300});
                $(upDown).fadeIn({duration : 300});
        }

        // 更新涨跌 bar
        function updateZDPBar(idKey, up, equal, down) {
            screenWidth = document.body.clientWidth;
            var bar = document.getElementById(idKey);
            all = up + equal + down;
            var upStocks = bar.getElementsByClassName("barUp")[0];
            $(upStocks).css('width', up / all * zdpBarWidth);
            upStocks.innerHTML = up;
            var equalStocks = bar.getElementsByClassName("barEqual")[0];
            $(equalStocks).css('width', equal / all * zdpBarWidth);
            equalStocks.innerHTML = equal;
            var downStocks = bar.getElementsByClassName("barDown")[0];
            $(downStocks).css('width', down / all * zdpBarWidth);
            downStocks.innerHTML = down;
        }

        // 更新沪深两市资金净流向
        function updateMoneyFlow(data) {
            // 沪深两市资金情况. http://data.eastmoney.com/zjlx/
            var klines = data["data"]["klines"];
            // ["2020-02-21 15:00", "-25845607550.0", "27224361803.0", "-1378753893.0", "-18919648215.0", "-6925959335.0"]
            // 时间，主力净流入（亿），小单净流入（亿），中单净流入（亿），大单净流入（亿），超大单净流入（亿）,都要除以 100000000
            var lastestData = klines[klines.length - 1].split(",");

            // 更新
            var moneyFlow = document.getElementById("inlandMoneyFlow");
            moneyFlow.innerHTML = "";
            // 标题
            var title = document.createElement('div');
            title.className = "indexTitle";
            title.innerText = "沪深资金净流入（亿）";
            moneyFlow.appendChild(title);
            // 数值区
            var box = document.createElement('div');
            box.className = "moneyValueBox";
            moneyFlow.appendChild(box);
            // 小
            var smallDeal = document.createElement('div');
            smallDeal.className = "moneyValue";
            var num = (parseFloat(lastestData[2]) / 100000000).toFixed(1);
            smallDeal.innerText = '小 ' + num;
            smallDeal.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(smallDeal);
            // 中
            var middleDeal = document.createElement('div');
            middleDeal.className = "moneyValue";
            var num = (parseFloat(lastestData[3]) / 100000000).toFixed(1);
            middleDeal.innerText = '中 ' + num;
            middleDeal.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(middleDeal);
            // 大
            var bigDeal = document.createElement('div');
            bigDeal.className = "moneyValue";
            var num = (parseFloat(lastestData[4]) / 100000000).toFixed(1);
            bigDeal.innerText = '大 ' + num;
            bigDeal.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(bigDeal);
            // 特大
            var extraDeal = document.createElement('div');
            extraDeal.className = "moneyValue";
            var num = (parseFloat(lastestData[5]) / 100000000).toFixed(1);
            extraDeal.innerText = '特 ' + num;
            extraDeal.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(extraDeal);
            // 主力（等于大单 与 特大单之和）
            var mainPowerDeal = document.createElement('div');
            mainPowerDeal.className = "moneyValue";
            var num = (parseFloat(lastestData[1]) / 100000000).toFixed(1);
            mainPowerDeal.innerText = '主 ' + num;
            mainPowerDeal.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(mainPowerDeal);
        }

        // 更新沪港通，深港通资金流向
        function updateHKMoneyFlow(data) {
            // 沪港通，深港通南北向资金情况 http://data.eastmoney.com/hsgt/index.html
            // 北向资金
            var S2N = data["data"]["s2n"];
            // ["15:00", "-88205.65", "5288205.65", "273623.63", "4926376.37", "185417.98"]
            // 时间，沪股通净流入（万），余额（万），深股通净流入（万），余额（万），两市净流入（万）
            var lastestS2N = S2N[S2N.length - 1].split(",");
            // 南向资金
            var N2S = data["data"]["n2s"];
            // ["16:10", "90440.80", "4109559.20", "16760.73", "4183239.27", "107201.53"]
            // 时间，港股通（沪）净流入（万），余额（万），港股通（深）净流入（万），余额（万），两市净流入（万）
            var lastestN2S = N2S[N2S.length - 1].split(",");

            // 更新
            var moneyFlow = document.getElementById("hkMoneyFlow");
            moneyFlow.innerHTML = "";
            // 标题
            var title = document.createElement('div');
            title.className = "indexTitle";
            title.innerText = "北向资金净流入（亿）";
            moneyFlow.appendChild(title);
            // 数值区
            var box = document.createElement('div');
            box.className = "moneyValueBox";
            moneyFlow.appendChild(box);
            // 沪
            var shMoney = document.createElement('div');
            shMoney.className = "moneyValue";
            var num = (parseFloat(lastestS2N[1]) / 10000).toFixed(1);
            shMoney.innerText = '沪 ' + num;
            shMoney.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(shMoney);
            // 深
            var szMoney = document.createElement('div');
            szMoney.className = "moneyValue";
            var num = (parseFloat(lastestS2N[3]) / 10000).toFixed(1);
            szMoney.innerText = '深 ' + num;
            szMoney.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(szMoney);
            // 总
            var totalMoney = document.createElement('div');
            totalMoney.className = "moneyValue";
            var num = (parseFloat(lastestS2N[5]) / 10000).toFixed(1);
            totalMoney.innerText = '总 '  + num;
            totalMoney.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(totalMoney);
            moneyFlow.appendChild(box);

            // 标题
            var title = document.createElement('div');
            title.className = "indexTitle";
            title.innerText = "南向资金净流入（亿）";
            moneyFlow.appendChild(title);
            // 数值区
            var box = document.createElement('div');
            box.className = "moneyValueBox";
            moneyFlow.appendChild(box);
            // 沪
            var shMoney = document.createElement('div');
            shMoney.className = "moneyValue";
            var num = (parseFloat(lastestN2S[1]) / 10000).toFixed(1)
            shMoney.innerText = '沪 ' + (parseFloat(lastestN2S[1]) / 10000).toFixed(1);
            shMoney.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(shMoney);
            // 深
            var szMoney = document.createElement('div');
            szMoney.className = "moneyValue";
            var num = (parseFloat(lastestN2S[3]) / 10000).toFixed(1);
            szMoney.innerText = '深 ' + num;
            szMoney.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(szMoney);
            // 总
            var totalMoney = document.createElement('div');
            totalMoney.className = "moneyValue";
            var num = (parseFloat(lastestN2S[5]) / 10000).toFixed(1);
            totalMoney.innerText = '总 '  + num;
            totalMoney.style.setProperty('background-color',getUpDownColoredText(num));
            box.appendChild(totalMoney);
            moneyFlow.appendChild(box);
        }

        // 更新期货，外汇数据
        function updateOtherInfos(key, name, current, lastClose) {
            // id
            elementId = "#" + key;
            // 汇率价保留小数点后 4 位
            if (key.indexOf('CNY') >= 0) {
                current = current.toFixed(4);
            } else {
                current = current.toFixed(2);
            }

            // 上次更新的值
            lastValue = $(elementId).val();
            // 如果没有上次值，则说明是第一次进入页面，不计算涨跌
            if (lastValue == 0) {
                lastValue = current;
            }

            // 和上次查询进行比较（非和昨天收盘价比较，而是和上次日内查询进行比较）
            raisedTag = "-";
            raisedTagColor = "#FFFFFF";
            if (current > lastValue) {
                raisedTag = "↑";
                raisedTagColor = "#DD2200";
            } else if (current < lastValue && current != 0) {
                raisedTag = "↓";
                raisedTagColor = "#009933";
            } else {
                raisedTag = "-";
                raisedTagColor = "#FFFFFF";
            }
            // 日间升降指标（和昨天收盘比较，决定整条数据的整体颜色）
            changedColor = "";
            if (current > lastClose) {
                // console.log('上涨');
                changedColor = "#DD2200";
            } else if (current < lastClose) {
                // console.log('下跌');
                changedColor = "#009933";
            } else {
                changedColor = "#FFFFFF";
            }

            // 取出 index 元素
            var indexElement = document.getElementById(key);
                indexElement.innerHTML = "";
                // 标题
                var title = document.createElement('div');
                title.className = "indexTitle";
                title.innerText = name;
                indexElement.appendChild(title);
                // 点数
                var indexValue = document.createElement('div');
                indexValue.className = "indexValue";
                indexValue.innerText = current;
                indexValue.style.setProperty('background-color',changedColor);
                indexElement.appendChild(indexValue);
                // 点数
                var changeRate = document.createElement('div');
                changeRate.className = "indexValue";
                changeRate.innerText = ((current / lastClose - 1) * 100).toFixed(2) + '%';
                changeRate.style.setProperty('background-color',changedColor);
                indexElement.appendChild(changeRate);
                // 变化方向
                var upDown = document.createElement('div');
                upDown.className = "indexUpDown";
                upDown.innerText = raisedTag;
                upDown.style.setProperty('color',raisedTagColor);
                indexElement.appendChild(upDown);
                // 保存本次数值
                $(elementId).val(current);
                // 更新动画
                $(upDown).fadeOut({duration : 300});
                $(upDown).fadeIn({duration : 300});
                $(upDown).fadeOut({duration : 300});
                $(upDown).fadeIn({duration : 300});


            // 保存本次数值
            $(elementId).val(current);
        }

        // 判断是否在某一时间段之内
        function isDuringDate(beginDateStr, endDateStr) {
            var curDate = new Date(),
                beginDate = new Date(beginDateStr),
                endDate = new Date(endDateStr);
            if (curDate >= beginDate && curDate <= endDate) {
                return true;
            }
            return false;
        }

        // 显示涨跌红绿色字符
        function getUpDownColoredText(num) {
            if (num > 0) {
                return '#DD2200';
            } else if (num < 0) {
                return '#009933';
            } else {
                return '#FFFFFF';
            }
        }

        // 返回带颜色的 span
        function addColoredText(text, color) {
            // var element = document.createElement('span');
            // element.style.setProperty('color',color);
            // // element.setAttribute('color',color);
            // element.innerText = text;
            // return element;
            return '\<span style=\"color: ' + color + '\">' + text + '\</span\>';
        }

        // 时间前置补 0
        function prefixInteger(num, length) {
            return (Array(length).join('0') + num).slice(-length);
        }

        // 显示时间
        function showtime() {
            var date = new Date();
            var year = date.getFullYear();
            var month = prefixInteger(date.getMonth() + 1, 2);
            var day = prefixInteger(date.getDate(), 2);
            var hh = prefixInteger(date.getHours(), 2);
            var mi = prefixInteger(date.getMinutes(), 2);
            var ss = prefixInteger(date.getSeconds(), 2);
            var dayTag = "日一二三四五六".charAt(date.getDay());
            var wk = "周" + dayTag;
            var status = "";
            var statusColor = "#FFFF00";
            var todayStr = year + '/' + month + '/' + day;
            if (dayTag == '日' || dayTag == '六') {
                status = "休市";
                isWeiswekend = true;
                isChinaMarketChanging = false;
                isMoneyFlowChanging = false;
                statusColor = "#FFFF00";
            } else {
                isWeekend = false;
                // 判断开盘（15:00 之后再更新 1 分钟，防止没有拿到15:00 之后的准确数据。11:31 也是同样意思）
                if (isDuringDate(todayStr + ' 9:30', todayStr + ' 11:31') || isDuringDate(todayStr + ' 13:00', todayStr + ' 15:01')) {
                    status = "开盘";
                    statusColor = "#337799";
                    isChinaMarketChanging = true;
                } else if (isDuringDate(todayStr + ' 11:30', todayStr + ' 13:00')) {
                    status = "午休";
                    isChinaMarketChanging = false;
                    statusColor = "#FFFF00";
                } else {
                    status = "收盘";
                    isChinaMarketChanging = false;
                    statusColor = "#FFFF00";
                }
                // 是否可以查询资金流向
                if (isDuringDate(todayStr + ' 9:00', todayStr + ' 11:31') || isDuringDate(todayStr + ' 13:00', todayStr + ' 16:11')) {
                    isMoneyFlowChanging = true;
                } else {
                    isMoneyFlowChanging = false;
                }
            }

            $("#timestamp").html(year + "-" + month + "-" + day + " " + hh + ":" + mi + ":" + ss + " " + wk + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + 'A股' + '\<span style=\"color: ' + statusColor + '\">' + status + '\</span\>');
        }

        // 隐藏资金流向区域
        function hideArea(element) {
            $(element).hide();
        }

        // 初始化
        $(document).ready(function () {
            // 初始化先抓取一下数据（第一次先让 China 和 Foreign 都拉到至少一次数据，之后 showtime 函数负责确定 isChinaMarketChanging 的值）
            isChinaMarketChanging = true;
            requestChinaData();
            requestZDPData();
            requestMoneyFlow();
            requestChinaDealMoney();
            isChinaMarketChanging = false;
            requestForeignData();
            requestOtherData();
            showtime();
            // 显示时间
            setInterval(showtime, 1000);
            // 每 10 秒更新一下数据
            setInterval(requestChinaData, 10 * 1000);
            setInterval(requestZDPData, 10 * 1000);
            setInterval(requestForeignData, 10 * 1000);
            setInterval(requestOtherData, 10 * 1000);
            setInterval(requestChinaDealMoney, 60 * 1000);
            setInterval(requestMoneyFlow, 60 * 1000);
        });
    </script>
</head>

<body>
    <!-- 时间区 -->
    <p id="timestamp" style="font-size: 36; color: #FAFAFA;">时间</p>
    <hr />
    <!-- 资金流向区 -->
    <div id="moneyFlow" style="color: #fff;" onclick="hideArea(this)">
        <div id="inlandDealMoney"></div>
        <div id="inlandMoneyFlow"></div>
        <div id="hkMoneyFlow"></div>
    </div>
    <hr />
    <!-- 涨跌平盘条形区 -->
    <div id="zdp">
        <div class="zdpBarArea" id="allStockBar">
            <div class="indexTitle">全市场</div>
            <div class="zdpBar">
                <div class="barUp">0</div>
                <div class="barEqual">0</div>
                <div class="barDown">0</div>
            </div>
        </div>
        <div class="zdpBarArea" id="ccyBar">
            <div class="indexTitle">创业板综</div>
            <div class="zdpBar">
                <div class="barUp">0</div>
                <div class="barEqual">0</div>
                <div class="barDown">0</div>
            </div>
        </div>
        <div class="zdpBarArea" id="sz50Bar">
            <div class="indexTitle">上证50</div>
            <div class="zdpBar">
                <div class="barUp">0</div>
                <div class="barEqual">0</div>
                <div class="barDown">0</div>
            </div>
        </div>
        <div class="zdpBarArea" id="hs300Bar">
            <div class="indexTitle">沪深300</div>
            <div class="zdpBar">
                <div class="barUp">0</div>
                <div class="barEqual">0</div>
                <div class="barDown">0</div>
            </div>
        </div>
        <div class="zdpBarArea" id="zz500Bar">
            <div class="indexTitle">中证500</div>
            <div class="zdpBar">
                <div class="barUp">0</div>
                <div class="barEqual">0</div>
                <div class="barDown">0</div>
            </div>
        </div>
        <div class="zdpBarArea" id="zz1000Bar">
            <div class="indexTitle">中证1000</div>
            <div class="zdpBar">
                <div class="barUp">0</div>
                <div class="barEqual">0</div>
                <div class="barDown">0</div>
            </div>
        </div>
    </div>
    <hr />
    <!-- 指数区 -->
    <div id="index">
        <!-- 中国 -->
        <!-- i:1.000012,i:1.000013,i:1.000832,i:1.000001,i:0.399001,i:0.399006,i:1.000015,i:1.000922,i:1.000016,i:1.000300,i:0.399905,i:1.000852,i:0.399005,i:1.000991,i:1.000992,i:0.399975,i:0.399986,i:0.399812,i:0.399971,i:1.000827,i:100.HSI,i:100.HSCEI,i:124.HSCCI -->
        <p class="index" id="000012">000012</p>
        <p class="index" id="000013">000013</p>
        <p class="index" id="000832">000832</p>
        <p class="index" id="000001">000001</p>
        <p class="index" id="399001">399001</p>
        <p class="index" id="399006">399006</p>
        <p class="index" id="000015">000015</p>
        <p class="index" id="000922">000922</p>
        <p class="index" id="000016">000016</p>
        <p class="index" id="000300">000300</p>
        <p class="index" id="399905">399905</p>
        <p class="index" id="000852">000852</p>
        <p class="index" id="399005">399005</p>
        <p class="index" id="000991">000991</p>
        <p class="index" id="000992">000992</p>
        <p class="index" id="399975">399975</p>
        <p class="index" id="399986">399986</p>
        <p class="index" id="399812">399812</p>
        <p class="index" id="399971">399971</p>
        <p class="index" id="000827">000827</p>
        <p class="index" id="162411">162411</p>
        <!-- 中国香港 -->
        <p class="index" id="HSI">HSI</p>
        <p class="index" id="HSCEI">HSCEI</p>
        <p class="index" id="HSCCI">HSCCI</p>
        <!-- 中国台湾 -->
        <p class="index" id="TWII">TWII</p>
        <hr />
        <!-- 亚洲新兴 & 欧洲，美洲等 -->
        <!-- FTSE FCHI GDAXI TWII N225 KS11 RTS DJIA NDX SPX -->
        <p class="index" id="N225">N225</p>
        <p class="index" id="KS11">KS11</p>
        <hr />
        <p class="index" id="FTSE">FTSE</p>
        <p class="index" id="FCHI">FCHI</p>
        <p class="index" id="GDAXI">GDAXI</p>
        <p class="index" id="RTS">RTS</p>
        <hr />
        <p class="index" id="DJIA">DJIA</p>
        <p class="index" id="NDX">NDX</p>
        <p class="index" id="SPX">SPX</p>
        <hr />
        <!-- 期货 -->
        <!-- hq_str_hf_CHA50CFD,hq_str_hf_GC,hq_str_hf_SI, hq_str_hf_CL -->
        <p class="index" id="hq_str_hf_CHA50CFD">hq_str_hf_CHA50CFD</p>
        <p class="index" id="hq_str_hf_GC">hq_str_hf_GC</p>
        <p class="index" id="hq_str_hf_SI">hq_str_hf_SI</p>
        <p class="index" id="hq_str_hf_CL">hq_str_hf_CL</p>
        <hr />
        <!-- 外汇 -->
        <!-- hq_str_USDCNY,hq_str_GBPCNY,hq_str_EURCNY,hq_str_HKDCNY,hq_str_CNYJPY -->
        <p class="index" id="hq_str_USDCNY">hq_str_USDCNY</p>
        <p class="index" id="hq_str_GBPCNY">hq_str_GBPCNY</p>
        <p class="index" id="hq_str_EURCNY">hq_str_EURCNY</p>
        <p class="index" id="hq_str_HKDCNY">hq_str_HKDCNY</p>
        <p class="index" id="hq_str_CNYJPY">hq_str_CNYJPY</p>
    </div>
</body>

</html>